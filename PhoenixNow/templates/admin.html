{% extends "layout.html" %}
{% block content %}
  <div class="admin-background">
  <form action="{{ url_for('admin.home') }}" method=post>
    {{ form.hidden_tag() }}

    <div class="form-group">
    {{ form.date.label }}
    {{ form.date(class_="form-control", value=searchdate) }}
    </div>

    {{ form.submit(class_="btn btn-default") }}
    
    <br></br>

    <div class="row">
    <input class="btn btn-default" id="submit" name="submit" type="submit" value="Previous Week">
    <input class="btn btn-default" id="submit" name="submit" type="submit" value="Next Week">
    </div>


  </form>

    <h2>Users</h2>

    <div class="table-responsive">
    <table class="table table-striped table-hover">

    <tr>
    <th>Last Name</th>
    <th>First Name</th>
    <th>Email</th>
    <th>Grade</th>
    <th>Monday</th>
    <th>Tuesday</th>
    <th>Wednesday</th>
    <th>Thursday</th>
    <th>Friday</th>
    <th>Schedule</th>
    <th>Schedule Verified</th>
    </tr>

    {% for user in users %}
    {% if user.verified %}
    <tr>
        <td><a href="/admin/user/{{user.id}}">{{ user.lastname }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.firstname }}</a></td>
        <td>{{ user.email }}</td>
        <td><a href="/admin/grade/{{user.grade}}">{{ user.grade }}</a></td>
        <td>{{ user.monday }}</td>
        <td>{{ user.tuesday }}</td>
        <td>{{ user.wednesday }}</td>
        <td>{{ user.thursday }}</td>
        <td>{{ user.friday }}</td>
        <td>{{ user.schedule }}</td>
        <td>{{ user.schedule_verified }}</td>
    </tr>
    {% endif %}
    {% endfor %}

    </table>
    </div>

    <h2>Check-ins</h2>

    <div class="table-responsive">
    <table class="table table-striped table-responsive table-hover">

    <tr>
    <th>Name</th>
    <th>Timestamp</th>
    <th>Week</th>
    <th>Day</th>
    </tr>
    
    {% for checkin in checkins %}    
    <tr>
    <td> {{ checkin.user.firstname }} {{ checkin.user.lastname }} </td>
    <td> {{ checkin.checkin_timestamp.strftime('%x %X%p') }} </td>
    <td> {{ checkin.checkin_week }} </td>
    <td> {{ checkin.checkin_timestamp.strftime('%A') }} </td>
    </tr>
    {% endfor %}

    </table>
    </div>

  </div>
{% endblock %}
