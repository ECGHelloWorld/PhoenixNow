{% extends "layout.html" %}
{% block content %}
  <div>

    <h2>Users</h2>

    <div>
    <table class="table table-striped table-responsive">

    <tr>
    <th>#</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
    <th>Grade</th>
    <th>Verified</th>
    <th>Schedule Verified</th>
    <th>Checked In</th>
    <th>Creation</th>
    <th>Checkins</th>
    </tr>

    {% for user in users %}    
    <tr>
        <td><a href="/admin/user/{{user.id}}">{{ user.id }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.firstname }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.lastname }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.email }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.grade }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.verified }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.schedule_verified }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.checkedin }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.creation_timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</a></td>
        <td><a href="/admin/user/{{user.id}}">{{ user.checkins.count() }}</a></td>
    </tr>
    {% endfor %}

    </table>

    <h2>Check-ins</h2>
    <table class="table table-striped table-responsive">

    <tr>
    <th>Timestamp</th>
    <th>Name</th>
    </tr>
    
    {% for checkin in users.checkins %}    
    <tr>
    <td> {{ checkin.checkin_timestamp.strftime('%Y-%m-%d %H:%M:%S') }} </td>
    <td> {{ checkin.user.firstname }} {{ checkin.user.lastname }} </td>
    </tr>
    {% endfor %}

    </table>
    </div>
  </div>
{% endblock %}
