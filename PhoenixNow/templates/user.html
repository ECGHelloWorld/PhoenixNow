{% extends "layout.html" %}
{% block content %}
  <div class="bg-white black">

    <span class="f3 b tc pv3 w-100 db">{{ user.firstname }} {{ user.lastname }}</span>

    <table class="f6 w-100 mw9 center" cellspacing="0">

    <thead>
      <tr class="stripe-dark">
        <th class="fw6 tl pa3 bg-white">Last Name</th>
        <th class="fw6 tl pa3 bg-white">First Name</th>
        <th class="fw6 tl pa3 bg-white">Email</th>
        <th class="fw6 tl pa3 bg-white">Grade</th>
        <th class="fw6 tl pa3 bg-white">Monday</th>
        <th class="fw6 tl pa3 bg-white">Tuesday</th>
        <th class="fw6 tl pa3 bg-white">Wednesday</th>
        <th class="fw6 tl pa3 bg-white">Thursday</th>
        <th class="fw6 tl pa3 bg-white">Friday</th>
        <th class="fw6 tl pa3 bg-white">Schedule</th>
        <th class="fw6 tl pa3 bg-white">Schedule Verified</th>
      </tr>
    </thead>
    <tbody class="lh-copy">
    {% if user.verified %}
    <tr class="stripe-dark">
        <td class="pa3"><a href="/admin/user/{{user.id}}">{{ user.lastname }}</a></td>
        <td class="pa3"><a href="/admin/user/{{user.id}}">{{ user.firstname }}</a></td>
        <td class="pa3">{{ user.email }}</td>
        <td class="pa3"><a href="/admin/grade/{{user.grade}}">{{ user.grade }}</a></td>
        <td class="pa3">{{ user.monday }}</td>
        <td class="pa3">{{ user.tuesday }}</td>
        <td class="pa3">{{ user.wednesday }}</td>
        <td class="pa3">{{ user.thursday }}</td>
        <td class="pa3">{{ user.friday }}</td>
        <td class="pa3">{{ user.schedule }}</td>
        <td class="pa3">{{ user.schedule_verified }}</td>
    </tr>
    {% endif %}

    </tbody>
    </table>

    <div class="cf">
    
    <div class="fl w-50">

    <h2>Schedule</h2>
    <table class="f6 w-100 mw9 center" cellspacing="0">

    <thead>
      <tr class="stripe-dark">
        <th class="fw6 tl pa3 bg-white">Schedule</th>
        <th class="fw6 tl pa3 bg-white">Verified</th>
        <th class="fw6 tl pa3 bg-white">Verify?</th>
      </tr>
    </thead>
      <tbody class="lh-copy">
        <tr class="stripe-dark">
            <td class="pa3">{{ user.schedule }}</td>
            <td class="pa3">{{ user.schedule_verified }}</td>
            <td class="pa3"><a href="/admin/user/{{ user.id }}/verify_schedule">Toggle Verification</a></td>
        </tr>
      </tbody>
    </table>

    </div>

    <div class="fl w-50">

      <div class="measure center">

    <h2>Edit User Information</h2>

    <form class="" action="{{ url_for('admin.user', user_id=user.id) }}" method=post>
      {{ form.hidden_tag() }}

      <div class="mt3">
      {{ form.firstname.label(class_="db") }}
      {{ form.firstname(class_="form-control", value=user.firstname) }}
      </div>

      <div class="mt3">
      {{ form.lastname.label(class_="db") }}
      {{ form.lastname(class_="form-control", value=user.lastname) }}
      </div>

      <div class="mv3">
      <label for="grade">Select Grade Level</label>
        <select class="form-control" name="grade" id="grade">
          <option>11</option>
          <option>12</option>
        </select>
      </div>

      <div class="mt2">
      {{ form.submit(class_="button-reset bn br2 phoenix-red-bg pv2 ph3 dim white") }}
      </div>

    </form>
    </div>

    </div>
    </div>

    <h2 class="center mw7 mt5 ml3">Check-ins</h2>
    <table class="f6 w-100 mw7 center" cellspacing="0">

    <thead>
    <tr class="stripe-dark">
    <th class="fw6 tl pa3 bg-white">Name</th>
    <th class="fw6 tl pa3 bg-white">Timestamp</th>
    <th class="fw6 tl pa3 bg-white">Week</th>
    <th class="fw6 tl pa3 bg-white">Day</th>
    </tr>
    </thead>
    
    <tbody class="lh-copy">
    {% for checkin in user.checkins %}    
    <tr class="stripe-dark">
    <td class="pa3"> {{ checkin.user.firstname }} {{ checkin.user.lastname }} </td>
    <td class="pa3"> {{ checkin.checkin_timestamp.strftime('%x %X%p') }} </td>
    <td class="pa3"> {{ checkin.checkin_week }} </td>
    <td class="pa3"> {{ checkin.checkin_timestamp.strftime('%A') }} </td>
    </tr>
    {% endfor %}
    </tbody>
    </table>


  </div>
{% endblock %}
